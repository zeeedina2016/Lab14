<!DOCTYPE HTML>
<HTML LANG="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src= "scripts/main.js"></script>

    <title>Popcorn Sales</title>

</head>
<body>
    <h1>Club Popcorn Sales</h1>
    <form id= "myForm"  action= "mailto:sthepsimoung@my.uri.edu" method="GET">
        <label for= "name"> Name: </label>
        <input type="text" id= "name" name="name" placeholder= "Name Required">
        <br><br>
        <label for= "address"> Street Address: </label>
        <input type="text" name="address" style="width: 500px">
        <br><br>
        <label for= "city"> City, State, Zip: </label>
        <input type="text" name="city" style="width: 500px" >
        <br>

        <table style= "width: 500">
            <tr>
                <th><h2>Product Name</h2></th>
                <th><h2>Price</h2></th>
                <th><h2>Quantity</h2></th>
            </tr>
            <br><br>
            <tr>
                <th>Unpopped Popcorn (1 lb.)</th>
                <th>$3.00</th>
                <th><input type="number" id="op1" name="QTY"> </th>
            </tr>
            <tr>
                <th>Caramel Popcorn(2 lb. Canister)</th>
                <th>$3.50</th>
                <th><input type="number" id="op2" name="QTY"> </th>
            </tr>
            <tr>
                <th>Caramel Nut Popcorn(2 lb. Canister)</th>
                <th>$4.50</th>
                <th><input type="number" id="op3" name="QTY"> </th>
            </tr>
            <tr>
                <th>Toffey Nut Popcorn(2 lb. Canister)</th>
                <th>$5.00</th>
                <th><input type="number" id="op4" name="QTY"> </th>
            </tr>
            <tr>
                <th><strong>Subtotal:</strong></th>
                <th><input id="stotal" type="text" readonly= "readonly" style="width: 100px"></th>
                <th><input type="button" id="update_total" onclick= "calcPrice()" value="Update Total"> </th>
            </tr>
        </table>
<br>
        <strong><h1>Payment Method</h1></strong>
        <strong>Grand Total</strong>:
        <input type="text"  id="Gtotal"  style="width: 100px">
        <br>
        <table cellspacing="15">
            <tr>
                <th><input id= "card" type="radio" onclick= "isCard()" value="Visa">Visa</th>
                <th><input id= "card2" type="radio" onclick= "isCard()" value="Master Card">Master Card</th>
                <th><input id= "card3" type="radio" onclick= "isCard()" value="Discover">Discover</th>
                <th><input id= "card4" type="radio" onclick= "isCard()" value="American Express">American Express</th>
                <th><input type="radio" id="check" value="Check">Check</th>
            </tr>
            <br>
            <tr>
                <th><input type="button" onclick= "IsEmpty()" name="Submit" value="Submit Order"> </th>
                <th><input type="button" onclick= "empty()" name="lear" value="Clear Form"> </th>
            </tr>
        </table>

</form>

<script>
    // calculate the subtotal
    function calcPrice() {
        var total = A+B+C+D;
        n = 4
        var A = 3*document.getElementById("op1").value;
        var B = 3.50*document.getElementById("op2").value;
        var C = 4.50*document.getElementById("op3").value;
        var D = 5*document.getElementById("op4").value;
        for(var i = 0; i <= 4; i++ ) {
            total = A + B + C + D
        }
        document.getElementById("stotal").value = total;

        var tax = total * 0.07;
        var percentage = total + tax;
        p = percentage.toFixed(2);
        if(total != ""){
            grandtotal = parseFloat(p); 
        }
        document.getElementById("Gtotal").value = grandtotal;
        
    }
    // clears the form
    function empty() {
        document.getElementById("myForm").reset();
    }
    // alert if name field is empty
    function IsEmpty() {
        if (document.forms["myForm"].name.value === "") {
            alert("Please Fill In Required Field");
            return false;
        }
        return true;
    }
    // confirmation box if using card
    //This chooses the check option, whenuser doesn't want to use card
    function isCard() {
        var input = document.getElementById("card");
        if(card.checked || card2.checked || card3.checked || card4.checked) {
            if(confirm("You are using a credit card, and will be charged an extra $2.50. Continue?")) {
                alert("You pressed continue.");
                
                // increases grand total after selecting card
                document.getElementById("Gtotal").value= grandtotal+2.50;
            } else {
                document.getElementById("check").checked = true;
                document.getElementById("card").checked = false;
                document.getElementById("card2").checked = false;
                document.getElementById("card3").checked = false;
                document.getElementById("card4").checked = false;
            }
        }
    }
</script>

</body>
</HTML>
